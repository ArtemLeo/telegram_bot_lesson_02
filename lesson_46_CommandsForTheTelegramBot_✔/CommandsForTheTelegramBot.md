# ‚úÖ –£—Ä–æ–∫ 42: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥ –¥–ª—è TelegramBot

---
<img src="main_image.png" alt="pygame" width="1500">

## –ó–º—ñ—Å—Ç —É—Ä–æ–∫—É:

1. [–°—å–æ–≥–æ–¥–Ω—ñ –Ω–∞ —É—Ä–æ—Ü—ñ](#1-—Å—å–æ–≥–æ–¥–Ω—ñ-–Ω–∞-—É—Ä–æ—Ü—ñ)
2. [–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–∏ `/films`](#2-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–∫–æ–º–∞–Ω–¥–∏-films)
3. [–§–∞–π–ª `data.json`](#3-—Ñ–∞–π–ª-datajson)
4. [–ú–æ–¥—É–ª—å `data.py`](#4-–º–æ–¥—É–ª—å-datapy)
5. [–ú–æ–¥—É–ª—å `keyboards.py`](#5-–º–æ–¥—É–ª—å-keyboardspy)
6. [–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `Menu`](#6-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-menu)
7. [–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ñ—ñ–ª—å–º–∏](#7-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–ø–µ—Ä–µ–≥–ª—è–¥—É-–¥–µ—Ç–∞–ª—å–Ω–æ—ó-—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó-–ø—Ä–æ-—Ñ—ñ–ª—å–º–∏)
8. [–ú–æ–¥—É–ª—å `models.py`](#8-–º–æ–¥—É–ª—å-modelspy)
9. [–ü—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫—ñ–≤ üöÄ](#9-–ø—ñ–¥–≤–µ–¥–µ–Ω–Ω—è-–ø—ñ–¥—Å—É–º–∫—ñ–≤-)

> üîó Useful Links:

- [JSON (JavaScript Object Notation)](https://uk.wikipedia.org/wiki/JSON)

---

## 1. –°—å–æ–≥–æ–¥–Ω—ñ –Ω–∞ —É—Ä–æ—Ü—ñ

> üí° –ù–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –±–∞–∑–æ–≤–æ–≥–æ **TelegramBot** —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ –∫–æ–º–∞–Ω–¥—É `/start`.

–ù–∞ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ –Ω–∞–≤—á–∏–º–æ—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤ —É **TelegramBot**, –∞ —Ç–∞–∫–æ–∂ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏
—Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ–∂–µ–Ω —Ñ—ñ–ª—å–º.

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ—ñ–ª—å–º—ñ–≤, –∞ —Ç–∞–∫–æ–∂ –æ—Ç—Ä–∏–º–∞—Ç–∏ –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ–∂–µ–Ω –∑ –Ω–∏—Ö (**–Ω–∞–∑–≤—É
—Ñ—ñ–ª—å–º—É, –æ–ø–∏—Å, —Ä–µ–π—Ç–∏–Ω–≥, –∂–∞–Ω—Ä, —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–æ—Ä—ñ–≤ —Ç–∞ –ø–æ—Å—Ç–µ—Ä**).

### üß© –û—Å–Ω–æ–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ:

- –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª–∞—Å—É `Command` —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/films`, —è–∫–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤.
- –î–æ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏–º–µ –ø–µ—Ä–µ–ª—ñ–∫ —Ñ—ñ–ª—å–º—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É (`Keyboard Builder`), —â–æ
  –∑—Ä–æ–±–∏—Ç—å –≤–∏–±—ñ—Ä –ø—Ä–æ—Å—Ç—ñ—à–∏–º —Ç–∞ –∑—Ä—É—á–Ω—ñ—à–∏–º.
- –î–æ–¥–∞—Ç–∏ **–º–µ–Ω—é** –∑ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏, —â–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–∞–ª–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ –±–æ—Ç–∞.
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º—É –∫–æ–º–∞–Ω–¥—É, —è–∫–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –æ–±–∏—Ä–∞—Ç–∏ —Ñ—ñ–ª—å–º —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω—å–æ–≥–æ.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–∏ `/films`

> üí° –ú–æ–¥—É–ª—å `commands.py` –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ –Ω–∞—à–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ.

–°—Ç–≤–æ—Ä–∏–º–æ —Ñ–∞–π–ª `commands.py`.

```python
from aiogram.filters import Command

FILMS_COMMAND = Command('films')
```

–£ —Ñ–∞–π–ª—ñ `bot.py` —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é `films()` - –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ `/films` (–ø–µ—Ä–µ–≥–ª—è–¥ —Ñ—ñ–ª—å–º—ñ–≤).

–§—É–Ω–∫—Ü—ñ—é `films()` –∑–∞–ª–∏—à–∏–º–æ –±–µ–∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó (`pass`).

```python
# –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /start
@dp.message(Command("start"))
async def start(message: Message) -> None:
    await message.answer(
        f"Helloüñê, {html.bold(message.from_user.full_name)}!\n"
        "I'm your first Telegram Bot ü•≥"
    )


# –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /films
@dp.message(FILMS_COMMAND)
async def films(message: Message) -> None:
    pass
```

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 3. –§–∞–π–ª `data.json`

> üí° –°—Ç–≤–æ—Ä–∏–º–æ —Ñ–∞–π–ª `data.json` –≤ –∫–æ—Ä–µ–Ω—ñ –Ω–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É, —è–∫–∏–π –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ñ—ñ–ª—å–º–∏.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `json` —Ñ–æ—Ä–º–∞—Ç—É [(JavaScript Object Notation)](https://uk.wikipedia.org/wiki/JSON) –ø—Ä–æ—Å—Ç–∞ —ñ –∑—Ä–æ–∑—É–º—ñ–ª–∞ —Ç–∞
—ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å—Ö–æ–∂–∏—Ö –∑–∞–≤–¥–∞–Ω—å.

–î–æ–¥–∞–º–æ —Å–ø–∏—Å–æ–∫ –∑ —Ñ—ñ–ª—å–º–∞–º–∏ –¥–æ —Ñ–∞–π–ª—É `data.json`

```json
[
  {
    "name": "Inception",
    "description": "–ó–ª–æ–¥—ñ–π, —è–∫–∏–π –∫—Ä–∞–¥–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å–Ω—É, –æ—Ç—Ä–∏–º—É—î –∑–∞–≤–¥–∞–Ω–Ω—è –≤–±—É–¥—É–≤–∞—Ç–∏ —ñ–¥–µ—é –≤ —Ä–æ–∑—É–º –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞.",
    "rating": 8.8,
    "genre": "Action, Adventure, Sci-Fi",
    "actors": [
      "Leonardo DiCaprio",
      "Joseph Gordon-Levitt",
      "Elliot Page"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/2/2e/Inception_%282010%29_theatrical_poster.jpg"
  },
  {
    "name": "Fight Club",
    "description": "–°—Ç—Ä–∞–∂–¥–∞—é—á–∏–π –±–µ–∑—Å–æ–Ω–Ω—è–º –æ—Ñ—ñ—Å–Ω–∏–π –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ —ñ –±–µ–∑—Ç—É—Ä–±–æ—Ç–Ω–∏–π –≤–∏—Ä–æ–±–Ω–∏–∫ –º–∏–ª–∞ —Å—Ç–≤–æ—Ä—é—é—Ç—å –ø—ñ–¥–ø—ñ–ª—å–Ω–∏–π –±–æ–π–æ–≤–∏–π –∫–ª—É–±, —è–∫–∏–π –ø–µ—Ä–µ—Ä–æ—Å—Ç–∞—î –≤ —â–æ—Å—å –Ω–∞–±–∞–≥–∞—Ç–æ –±—ñ–ª—å—à–µ.",
    "rating": 8.8,
    "genre": "Drama",
    "actors": [
      "Brad Pitt",
      "Edward Norton",
      "Helena Bonham Carter"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/f/fc/Fight_Club_poster.jpg"
  },
  {
    "name": "The Silence of the Lambs",
    "description": "–ú–æ–ª–æ–¥–æ–º—É –∞–≥–µ–Ω—Ç—É –§–ë–† –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É –≤—ñ–¥ —É–≤'—è–∑–Ω–µ–Ω–æ–≥–æ —ñ –º–∞–Ω—ñ–ø—É–ª—è—Ç–∏–≤–Ω–æ–≥–æ –≤–±–∏–≤—Ü—ñ-–∫–∞–Ω—ñ–±–∞–ª–∞, —â–æ–± —Å–ø—ñ–π–º–∞—Ç–∏ —ñ–Ω—à–æ–≥–æ —Å–µ—Ä—ñ–π–Ω–æ–≥–æ –≤–±–∏–≤—Ü—é, –±–æ–∂–µ–≤—ñ–ª—å–Ω–æ–≥–æ, —è–∫–∏–π –∑–Ω—ñ–º–∞—î —à–∫—ñ—Ä—É –∑—ñ —Å–≤–æ—ó—Ö –∂–µ—Ä—Ç–≤.",
    "rating": 8.6,
    "genre": "Crime, Drama, Thriller",
    "actors": [
      "Jodie Foster",
      "Anthony Hopkins",
      "Lawrence A. Bonney"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/8/86/The_Silence_of_the_Lambs_poster.jpg"
  },
  {
    "name": "Interstellar",
    "description": "–ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å–ª—ñ–¥–Ω–∏–∫—ñ–≤ –ø–æ–¥–æ—Ä–æ–∂—É—î —á–µ—Ä–µ–∑ –∫—Ä–æ—Ç–æ–≤—É –Ω–æ—Ä—É –≤ –ø—Ä–æ—Å—Ç–æ—Ä—ñ —É —Å–ø—Ä–æ–±—ñ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –≤–∏–∂–∏–≤–∞–Ω–Ω—è –ª—é–¥—Å—Ç–≤–∞.",
    "rating": 8.6,
    "genre": "Adventure, Drama, Sci-Fi",
    "actors": [
      "Matthew McConaughey",
      "Anne Hathaway",
      "Jessica Chastain"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg"
  },
  {
    "name": "Jurassic Park",
    "description": "–ú—ñ–ª—å—è—Ä–¥–µ—Ä-–µ–Ω—Ç—É–∑—ñ–∞—Å—Ç —Å—Ç–≤–æ—Ä—é—î –ø–∞—Ä–∫ —Ä–æ–∑–≤–∞–≥ –∑ –∫–ª–æ–Ω–æ–≤–∞–Ω–∏–º–∏ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞–º–∏, –∞–ª–µ –≤—Å–µ –π–¥–µ –Ω–µ –∑–∞ –ø–ª–∞–Ω–æ–º, –∫–æ–ª–∏ –¥–∏–Ω–æ–∑–∞–≤—Ä–∏ –≤–∏—Ä–∏–≤–∞—é—Ç—å—Å—è –Ω–∞ –≤–æ–ª—é —ñ –ø–æ—á–∏–Ω–∞—é—Ç—å –ø–æ–ª—é–≤–∞—Ç–∏ –Ω–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤ –ø–∞—Ä–∫—É.",
    "rating": 8.1,
    "genre": "Adventure, Sci-Fi, Thriller",
    "actors": [
      "Sam Neill",
      "Laura Dern",
      "Jeff Goldblum"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/e/e7/Jurassic_Park_poster.jpg"
  },
  {
    "name": "The Dark Knight Rises",
    "description": "–ë–µ—Ç–º–µ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è, —â–æ–± –≤—Ä—è—Ç—É–≤–∞—Ç–∏ –ì–æ—Ç–µ–º –≤—ñ–¥ –Ω–æ–≤–æ–≥–æ –≤–æ—Ä–æ–≥–∞ –ë–µ–π–Ω–∞, —è–∫–∏–π –∑–∞–≥—Ä–æ–∂—É—î –∑–Ω–∏—â–∏—Ç–∏ –º—ñ—Å—Ç–æ. –ë–µ—Ç–º–µ–Ω –ø–æ–≤–∏–Ω–µ–Ω –ø–æ–¥–æ–ª–∞—Ç–∏ —Å–≤–æ—ó —Ñ—ñ–∑–∏—á–Ω—ñ —Ç–∞ –µ–º–æ—Ü—ñ–π–Ω—ñ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è, —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –ë–µ–π–Ω–∞.",
    "rating": 8.4,
    "genre": "Action, Thriller",
    "actors": [
      "Christian Bale",
      "Tom Hardy",
      "Anne Hathaway"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/8/83/Dark_knight_rises_poster.jpg"
  },
  {
    "name": "The Avengers: Endgame",
    "description": "–ü—ñ—Å–ª—è —Ä—É–π–Ω—ñ–≤–Ω–∏—Ö –ø–æ–¥—ñ–π, —Å–ø—Ä–∏—á–∏–Ω–µ–Ω–∏—Ö –¢–∞–Ω–æ—Å–æ–º, –∑–∞–ª–∏—à–∫–∏ –ú–µ—Å–Ω–∏–∫—ñ–≤ —Ç–∞ —ó—Ö–Ω—ñ —Å–æ—é–∑–Ω–∏–∫–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è —Ä–∞–∑–æ–º, —â–æ–± –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –í—Å–µ—Å–≤—ñ—Ç —ñ –∑—É–ø–∏–Ω–∏—Ç–∏ –¢–∞–Ω–æ—Å–∞ —Ä–∞–∑ —ñ –Ω–∞–∑–∞–≤–∂–¥–∏.",
    "rating": 8.4,
    "genre": "Action, Adventure, Sci-Fi",
    "actors": [
      "Robert Downey Jr.",
      "Chris Evans",
      "Mark Ruffalo"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/0/0d/Avengers_Endgame_poster.jpg"
  },
  {
    "name": "The Revenant",
    "description": "–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–∂–∏–≤–∞–Ω–Ω—è –º–∏—Å–ª–∏–≤—Ü—è –•'—é –ì–ª–∞—Å—Å–∞, —è–∫–∏–π –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞–æ–¥–∏–Ω—Ü—ñ –≤ –¥–∏–∫—ñ–π –ø—Ä–∏—Ä–æ–¥—ñ –ø—ñ—Å–ª—è –Ω–∞–ø–∞–¥—É –≤–µ–¥–º–µ–¥—è. –í—ñ–Ω –≤–∏–∂–∏–≤–∞—î –∑–∞–≤–¥—è–∫–∏ —Å–≤–æ—ó–π —Å–∏–ª—ñ –≤–æ–ª—ñ —Ç–∞ –±–∞–∂–∞–Ω–Ω—é –ø–æ–º—Å—Ç–∏—Ç–∏—Å—è —Ç–∏–º, —Ö—Ç–æ –ø–æ–∫–∏–Ω—É–≤ –π–æ–≥–æ –ø–æ–º–µ—Ä—Ç–∏.",
    "rating": 8.0,
    "genre": "Adventure, Drama, Thriller",
    "actors": [
      "Leonardo DiCaprio",
      "Tom Hardy",
      "Domhnall Gleeson"
    ],
    "poster": "https://upload.wikimedia.org/wikipedia/en/b/b6/The_Revenant_2015_film_poster.jpg"
  }
]
```

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 4. –ú–æ–¥—É–ª—å `data.py`

> üí° –©–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –º–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å –Ω–∞—à–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –≤–∞—Ä—Ç–æ —Ä–æ–∑–±–∏–≤–∞—Ç–∏ –∑–∞–¥–∞—á—ñ –Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ —ó—Ö –±—É–¥—É—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏.

–°—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥—É–ª—å `data.py` –≤ –∫–æ—Ä–µ–Ω—ñ –Ω–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É:

- –°—Ç–≤–æ—Ä–∏–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `get_films()` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤.
- –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –≤ –º–æ–¥—É–ª—å `data.py` –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É `json`

```python
import json


#  –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤
def get_films(file_path: str = "data.json", film_id: int | None = None) -> list[dict] | dict:
    with open(file_path, 'r') as fp:
        films = json.load(fp)
        if film_id is not None and film_id < len(films):
            return films[film_id]
        return films
```

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 5. –ú–æ–¥—É–ª—å `keyboards.py`

–°—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥—É–ª—å `keyboards.py` –≤ –∫–æ—Ä–µ–Ω—ñ –Ω–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É:

–Ü–º–ø–æ—Ä—Ç—É—î–º–æ –∫–ª–∞—Å–∏ `InlineKeyboardBuilder` —Ç–∞ `CallbackData`:

- –ö–ª–∞—Å `InlineKeyboardBuilder` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫ —É **Telegram** –±–æ—Ç–∞—Ö, —è–∫—ñ –º–æ–∂—É—Ç—å
  –±—É—Ç–∏ –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω—ñ –¥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —ñ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –¥—ñ—ó –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ.
- –ö–ª–∞—Å `CallbackData` –¥–æ–ø–æ–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏ –¥–∞–Ω—ñ, —è–∫—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫–∏ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—ó
  –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.

–°—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å `FilmCallback` –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π `id` —Ç–∞ `name`:

- –ö–ª–∞—Å `FilmCallback` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤, —è–∫—ñ –º—ñ—Å—Ç—è—Ç—å –¥–∞–Ω—ñ –ø—Ä–æ —Ñ—ñ–ª—å–º–∏ (`id`, `name`).
- `id`: –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Ñ—ñ–ª—å–º—É (`int`).
- `name`: –ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É (`str`).

–†–µ–∞–ª—ñ–∑—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `films_keyboard_markup()`:

- –§—É–Ω–∫—Ü—ñ—è `films_keyboard_markup` —Å—Ç–≤–æ—Ä—é—î —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É –∑ –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ—ñ–ª—å–º—É –∑—ñ —Å–ø–∏—Å–∫—É `films_list`.
- `films_list` - —Ü–µ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–Ω–∏–∫—ñ–≤, –¥–µ –∫–æ–∂–µ–Ω —Å–ª–æ–≤–Ω–∏–∫ –º—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ñ—ñ–ª—å–º.
- `offset` —Ç–∞ `skip` - —Ü–µ –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó –∞–±–æ –ø—Ä–æ–ø—É—Å–∫—É –ø–µ–≤–Ω–∏—Ö
  –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤.

```python
from aiogram.utils.keyboard import InlineKeyboardBuilder
from aiogram.filters.callback_data import CallbackData


class FilmCallback(CallbackData, prefix="film", sep=";"):
    id: int
    name: str


# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –∑ —Ñ—ñ–ª—å–º–∞–º–∏
def films_keyboard_markup(films_list: list[dict], offset: int | None = None, skip: int | None = None):
    # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç InlineKeyboardBuilder –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
    builder = InlineKeyboardBuilder()

    # –£—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ —É —Ä—è–¥–∫—É —Ç–∞ –ø–æ–≤—Ç–æ—Ä—é—î–º–æ —Ü–µ–π —à–∞–±–ª–æ–Ω
    builder.adjust(1, repeat=True)

    # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤ —Ç–∞ –¥–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ—ñ–ª—å–º—É
    for index, film_data in enumerate(films_list):
        # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç FilmCallback –∑ –¥–∞–Ω–∏–º–∏ —Ñ—ñ–ª—å–º—É
        callback_data = FilmCallback(id=index, **film_data)
        # –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –∑ —Ç–µ–∫—Å—Ç–æ–º –Ω–∞–∑–≤–∏ —Ñ—ñ–ª—å–º—É —Ç–∞ callback –¥–∞–Ω–∏–º–∏
        builder.button(
            text=f"{callback_data.name}",  # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ - –Ω–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É
            callback_data=callback_data.pack()  # Callback –¥–∞–Ω—ñ, —è–∫—ñ –±—É–¥—É—Ç—å –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏
        )

    # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É —É –≤–∏–≥–ª—è–¥—ñ —Ä–æ–∑–º—ñ—Ç–∫–∏
    builder.adjust(1, repeat=True)
    return builder.as_markup()
```

–§—É–Ω–∫—Ü—ñ—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤, —Å—Ç–≤–æ—Ä—é—î –∫–Ω–æ–ø–∫—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ—ñ–ª—å–º—É –∑ –π–æ–≥–æ –Ω–∞–∑–≤–æ—é —Ç–∞ –¥–æ–¥–∞—î —Ü—é –∫–Ω–æ–ø–∫—É –¥–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.

–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —É –≤–∏–≥–ª—è–¥—ñ —Ä–æ–∑–º—ñ—Ç–∫–∏, —è–∫—É –æ—Ç—Ä–∏–º—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, —è–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Å–≤—ñ–π –∑–∞–ø–∏—Ç.

–ù–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–Ω–µ—Å—Ç–∏ –∑–º—ñ–Ω–∏ –≤ –∫–æ–¥ –º–æ–¥—É–ª—è `bot.py`:

- –î–æ–¥–∞—î–º–æ —ñ–º–ø–æ—Ä—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π `get_films()` —Ç–∞ `films_keyboard_markup()`.
- –î–æ–¥–∞—î–º–æ —ñ–º–ø–æ—Ä—Ç `FILMS_COMMAND` –∑ –º–æ–¥—É–ª—è `commands.py`.
- –†–µ–∞–ª—ñ–∑—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é-–æ–±—Ä–æ–±–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏ `/films`
- –¢–∞–∫–æ–∂, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–ø–æ–≤–Ω–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `films()`, —è–∫—É –º–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –±–µ–∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó.

```python
# –î–æ–¥–∞—î–º–æ —ñ–º–ø–æ—Ä—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
from commands import FILMS_COMMAND
from data import get_films
from keyboards import films_keyboard_markup
```

```python
# –†–µ–∞–ª—ñ–∑—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏ `/films`
@dp.message(FILMS_COMMAND)
async def films(message: Message) -> None:
    data = get_films()
    markup = films_keyboard_markup(films_list=data)
    await message.answer(
        f"<b>–°–ø–∏—Å–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤: üé¨</b>\n–û–±–µ—Ä—ñ—Ç—å —Ñ—ñ–ª—å–º, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω—å–æ–≥–æ.",
        reply_markup=markup
    )
```

–ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ, —è–∫ —Ç–µ–ø–µ—Ä –≤–∏–≥–ª—è–¥–∞—î —Ñ–∞–π–ª `bot.py`

### Code ‚úÖ

```python
# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –º–æ–¥—É–ª—ñ
import asyncio  # –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
import logging  # –î–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π
import sys  # –î–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–µ—è–∫–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–æ–º Python

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–æ–≥–æ —Ñ–∞–π–ª—É
from config import BOT_TOKEN as TOKEN

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–ª–∞—Å–∏ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ aiogram
from aiogram import Bot, Dispatcher, html
from aiogram.client.default import DefaultBotProperties
from aiogram.enums import ParseMode
from aiogram.filters import Command
from aiogram.types import Message
from commands import FILMS_COMMAND
from data import get_films
from keyboards import films_keyboard_markup

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –æ–Ω–æ–≤–ª–µ–Ω—å
dp = Dispatcher()


# –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /start
@dp.message(Command("start"))
async def start(message: Message) -> None:
    await message.answer(
        f"Helloüñê, {html.bold(message.from_user.full_name)}!\n"
        "I'm your first Telegram Bot ü•≥"
    )


# –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /films
@dp.message(FILMS_COMMAND)
async def films(message: Message) -> None:
    data = get_films()
    markup = films_keyboard_markup(films_list=data)
    await message.answer(
        f"<b>–°–ø–∏—Å–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤: üé¨</b>\n–û–±–µ—Ä—ñ—Ç—å —Ñ—ñ–ª—å–º, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω—å–æ–≥–æ.",
        reply_markup=markup
    )


# –ì–æ–ª–æ–≤–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞
async def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑ —Ç–æ–∫–µ–Ω–æ–º —Ç–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))

    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ü–∏–∫–ª –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å
    await dp.start_polling(bot)


# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É
if __name__ == "__main__":
    # –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –±–∞–∑–æ–≤–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–æ—Ç—ñ–∫ –≤–∏–≤–µ–¥–µ–Ω–Ω—è
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
    # –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥–æ–ª–æ–≤–Ω—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é
    asyncio.run(main())
```

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 6. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `Menu`

–°—Ç–≤–æ—Ä–∏–º–æ `Menu` –≤ –Ω–∞—à–æ–º—É **TelegramBot** —Ç–∞ –¥–æ–¥–∞–º–æ –≤ –Ω—å–æ–≥–æ –∫–æ–º–∞–Ω–¥—É `/films`.

```python
from aiogram.filters import Command
from aiogram.types.bot_command import BotCommand

START_COMMAND = Command('start')
FILMS_COMMAND = Command('films')

BOT_COMMANDS = [
    BotCommand(command='start', description="–ü–æ—á–∞—Ç–∏ —Ä–æ–∑–º–æ–≤—É"),
    BotCommand(command='films', description="–ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤")
]
```

- –ö–ª–∞—Å `Command` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –∫–æ–º–∞–Ω–¥–∏, —è–∫—ñ –±–æ—Ç –º–æ–∂–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –≤—ñ–¥
  –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –¶—ñ –æ–±'—î–∫—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—è –º–∞—î –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫–∞–Ω–∞
  –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø–µ–≤–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏.
- –ö–ª–∞—Å `BotCommand` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥, —è–∫—ñ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ Telegram. –ö–æ–∂–Ω–∞
  –∫–æ–º–∞–Ω–¥–∞ –º–∞—î –Ω–∞–∑–≤—É —Ç–∞ –æ–ø–∏—Å, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, –¥–ª—è —á–æ–≥–æ –≤–æ–Ω–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞.
- –û–±'—î–∫—Ç–∏ `FILMS_COMMAND` —Ç–∞ `START_COMMAND` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –∫–æ–º–∞–Ω–¥–∏ `/films` —Ç–∞ `/start`. –í–æ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è
  —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —Ñ—É–Ω–∫—Ü—ñ—è—Ö-–æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—è –º–∞—î –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—ó
  –∫–æ–º–∞–Ω–¥–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
- –û–±'—î–∫—Ç–∏ `BOT_COMMANDS` –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –∫–æ–º–∞–Ω–¥–∏, —â–æ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ Telegram.
  –ö–æ–∂–µ–Ω –æ–±'—î–∫—Ç –º–∞—î –¥–≤–∞ –ø–æ–ª—è:
    - `command`: –ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏, —è–∫–∞ –±—É–¥–µ –≤–≤–µ–¥–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `/films` –∞–±–æ `/start`).
    - `description`: –û–ø–∏—Å –∫–æ–º–∞–Ω–¥–∏, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, –¥–ª—è —á–æ–≥–æ –≤–æ–Ω–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞.

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –∫–æ–¥ –≤ –º–æ–¥—É–ª—ñ `commands.py`:

```python
# Old code
from aiogram.filters import Command

FILMS_COMMAND = Command('films')
```

```python
# New code
from aiogram.filters import Command
from aiogram.types.bot_command import BotCommand

START_COMMAND = Command('start')
FILMS_COMMAND = Command('films')

BOT_COMMANDS = [
    BotCommand(command='start', description="–ü–æ—á–∞—Ç–∏ —Ä–æ–∑–º–æ–≤—É"),
    BotCommand(command='films', description="–ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤")
]
```

–ö–ª–∞—Å–∏ `Command` —ñ `BotCommand` –º–æ–∂—É—Ç—å –∑–¥–∞—Ç–∏—Å—è —Å—Ö–æ–∂–∏–º–∏, –∞–ª–µ –≤–æ–Ω–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å —Ä—ñ–∑–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ —Ä–æ–±–æ—Ç–∏ –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é
aiogram –¥–ª—è **Telegram** –±–æ—Ç—ñ–≤:

- `Command` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –ö–æ–ª–∏ –±–æ—Ç –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –≤—ñ–Ω –º–æ–∂–µ
  –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–æ–±—Ä–æ–±–Ω–∏–∫ –º–∞—î –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ—Ç—Ä–∏–º–∞–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏.
- `BotCommand` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–æ–º–∞–Ω–¥, —è–∫—ñ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ Telegram. –¶–µ
  –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —ñ —è–∫ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ –º–æ–¥—É–ª—å `bot.py`:

```python
# Old string
from commands import FILMS_COMMAND

# New string
from commands import FILMS_COMMAND, START_COMMAND, BOT_COMMANDS
```

–¢–∞–∫–æ–∂ –¥–æ–¥–∞–º–æ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ –≥–æ–ª–æ–≤–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `main()` –º–æ–¥—É–ª—è `bot.py`:

```python
# Old code
async def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑ —Ç–æ–∫–µ–Ω–æ–º —Ç–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))

    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ü–∏–∫–ª –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å
    await dp.start_polling(bot)
```

```python
# New code
async def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑ —Ç–æ–∫–µ–Ω–æ–º —Ç–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
    await bot.set_my_commands(BOT_COMMANDS)

    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ü–∏–∫–ª –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å
    await dp.start_polling(bot)
```

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ **–∑–∞–ø—É—Å—Ç–∏—Ç–∏** –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º—É —Ç–∞ **–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–º—ñ–Ω–∏**, —è–∫—ñ –º–∏ –¥–æ–¥–∞–ª–∏.

–ë–∞–∂–∞–Ω–æ —Ü–µ —Ä–æ–±–∏—Ç–∏ –∑ **Desktop** –≤–µ—Ä—Å—ñ—ó **Telegram**.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 7. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ñ—ñ–ª—å–º–∏

> üí° `FilmCallback` - —Ü–µ –∫–ª–∞—Å, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É (`callback data`), –∫–æ–ª–∏
> –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –Ω–∞ –∫–Ω–æ–ø–∫—É —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—ó –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.

- –ö–ª–∞—Å `FilmCallback` –¥–æ–ø–æ–º–∞–≥–∞—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∞ –¥—ñ—è –º–∞—î –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏.
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, `FilmCallback` –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ `id` —Ñ—ñ–ª—å–º—É, —è–∫–∏–π –æ–±—Ä–∞–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.

–ó–º—ñ–Ω–∏–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫ —ñ–º–ø–æ—Ä—Ç—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ —É —Ñ–∞–π–ª—ñ `bot.py`:

```python
# Old string
from keyboards import films_keyboard_markup

# New string
from keyboards import films_keyboard_markup, FilmCallback
```

> üí° `CallbackQuery` - —Ü–µ –∫–ª–∞—Å, —è–∫–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ –≤—ñ–¥ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—ó –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.

- –ö–ª–∞—Å`CallbackQuery` –º—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–µ, —è–∫–∞ –∫–Ω–æ–ø–∫–∞ –±—É–ª–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ —Ç–∞ —è–∫—ñ –¥–∞–Ω—ñ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ —Ü–∏–º –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º.
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏, —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –¥—ñ–π —É
  –≤—ñ–¥–ø–æ–≤—ñ–¥—å.

–ó–º—ñ–Ω–∏–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫ —ñ–º–ø–æ—Ä—Ç—É —É —Ñ–∞–π–ª—ñ `bot.py`:

```python
# Old string
from aiogram.types import Message

# New string
from aiogram.types import Message, CallbackQuery
```

–†–µ–∞–ª—ñ–∑—É—î–º–æ **—Ñ—É–Ω–∫—Ü—ñ—é** `callback_film()`, —è–∫–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Ñ—ñ–ª—å–º.

–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ –≤ –º–æ–¥—É–ª—å `bot.py`:

```python
# –û–±—Ä–æ–±–Ω–∏–∫ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –¥–ª—è —Ñ—ñ–ª—å–º—ñ–≤
@dp.callback_query(FilmCallback.filter())
async def callback_film(callback: CallbackQuery, callback_data: FilmCallback) -> None:
    # –û—Ç—Ä–∏–º—É—î–º–æ ID —Ñ—ñ–ª—å–º—É –∑ –¥–∞–Ω–∏—Ö –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É
    film_id = callback_data.id
    # –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ—ñ–ª—å–º –∑–∞ –π–æ–≥–æ ID
    film_data = get_films(film_id=film_id)
    # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç —Ñ—ñ–ª—å–º—É
    film = Film(**film_data)

    # –§–æ—Ä–º—É—î–º–æ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ —Ñ—ñ–ª—å–º
    text = (
        f"<b>–§—ñ–ª—å–º:</b> {film.name}\n"
        f"<b>–û–ø–∏—Å:</b> {film.description}\n"
        f"<b>–†–µ–π—Ç–∏–Ω–≥:</b> {film.rating}\n"
        f"<b>–ñ–∞–Ω—Ä:</b> {film.genre}\n"
        f"<b>–ê–∫—Ç–æ—Ä–∏:</b> {', '.join(film.actors)}\n"
    )

    # –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ —Ñ–æ—Ç–æ –∑ –ø–æ—Å—Ç–µ—Ä–æ–º —Ñ—ñ–ª—å–º—É —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º –∑ –¥–µ—Ç–∞–ª—è–º–∏
    await callback.message.answer_photo(
        caption=text,
        photo=URLInputFile(
            film.poster,
            filename=f"{film.name}_poster.{film.poster.split('.')[-1]}"
        )
    )
```

### üß© –†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ —Ü—å–æ–≥–æ –∫–æ–¥—É:

### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä:

```python
@dp.callback_query(FilmCallback.filter())
```

- `@dp.callback_query` - —Ü–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–≤–æ—Ä–æ—Ç–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ (`callback queries`) —É
  **Telegram** –±–æ—Ç–∞—Ö. –í—ñ–Ω –≤–∫–∞–∑—É—î, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –π–¥–µ –ø—ñ—Å–ª—è –Ω—å–æ–≥–æ, –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∞, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –Ω–∞ –∫–Ω–æ–ø–∫—É
  —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—ó –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏.
- `FilmCallback.filter()` - —Ü–µ —Ñ—ñ–ª—å—Ç—Ä, —è–∫–∏–π –≤–∫–∞–∑—É—î, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫
  –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–µ–≤–Ω–∏–º –∫—Ä–∏—Ç–µ—Ä—ñ—è–º, –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º —É –∫–ª–∞—Å—ñ `FilmCallback`.

### –û–≥–æ–ª–æ—à–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó:

```python
async def callback_film(callback: CallbackQuery, callback_data: FilmCallback) -> None:
```

- `async def` - —Ü–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫—ñ –º–æ–∂—É—Ç—å
  –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—å –ø–µ–≤–Ω–∏–π —á–∞—Å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –º–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏), –Ω–µ –±–ª–æ–∫—É—é—á–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω –ø—Ä–æ–≥—Ä–∞–º–∏.
- `callback_film` - —Ü–µ —ñ–º'—è —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫–∞ –±—É–¥–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫.
- `callback: CallbackQuery` - —Ü–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –æ–±'—î–∫—Ç –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É, –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ –≤—ñ–¥
  –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
- `CallbackQuery` - —Ü–µ –∫–ª–∞—Å –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ aiogram, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫.
- `callback_data: FilmCallback` - —Ü–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –¥–∞–Ω—ñ, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –∑–≤–æ—Ä–æ—Ç–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º.
- `FilmCallback` - —Ü–µ –∫–ª–∞—Å, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ü–∏—Ö –¥–∞–Ω–∏—Ö.
- `-> None` - —Ü–µ –≤–∫–∞–∑—É—î, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î –∂–æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ —Ñ—ñ–ª—å–º:

```python
film_id = callback_data.id
film_data = get_films(film_id=film_id)
film = Film(**film_data)
```

- `film_id = callback_data.id`: –û—Ç—Ä–∏–º—É—î–º–æ `id` —Ñ—ñ–ª—å–º—É –∑ –¥–∞–Ω–∏—Ö –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É.
- `film_data = get_films(film_id=film_id)`: –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `get_films` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ—ñ–ª—å–º –∑–∞
  –π–æ–≥–æ `id`.
- `film = Film(**film_data)`: –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç —Ñ—ñ–ª—å–º—É, –ø–µ—Ä–µ–¥–∞—é—á–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—É `Film`.

### –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:

```python
text = (
    f"<b>–§—ñ–ª—å–º:</b> {film.name}\n"
    f"<b>–û–ø–∏—Å:</b> {film.description}\n"
    f"<b>–†–µ–π—Ç–∏–Ω–≥:</b> {film.rating}\n"
    f"<b>–ñ–∞–Ω—Ä:</b> {film.genre}\n"
    f"<b>–ê–∫—Ç–æ—Ä–∏:</b> {', '.join(film.actors)}\n"
)
```

- –¢—É—Ç —Ñ–æ—Ä–º—É—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ —Ñ—ñ–ª—å–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –¥–∞–Ω—ñ –∑ –æ–±'—î–∫—Ç–∞ `film`.
- –¢–µ–∫—Å—Ç –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–∑–≤—É —Ñ—ñ–ª—å–º—É, –æ–ø–∏—Å, —Ä–µ–π—Ç–∏–Ω–≥, –∂–∞–Ω—Ä —Ç–∞ —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–æ—Ä—ñ–≤.

### –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —Ñ–æ—Ç–æ:

```python
await callback.message.answer_photo(
    caption=text,
    photo=URLInputFile(
        film.poster,
        filename=f"{film.name}_poster.{film.poster.split('.')[-1]}"
    )
)
```

- `await callback.message.answer_photo` - —Ü–µ –º–µ—Ç–æ–¥, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ —Ç–µ–∫—Å—Ç–æ–º —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞
  –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫.
- `caption=text:` –¢–µ–∫—Å—Ç, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —Ä–∞–∑–æ–º –∑ —Ñ–æ—Ç–æ.
- `photo=URLInputFile(...)` - —Ü–µ –æ–±'—î–∫—Ç, —è–∫–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Ñ–æ—Ç–æ, —è–∫–µ –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ. –í—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å URL –ø–æ—Å—Ç–µ—Ä—É —Ñ—ñ–ª—å–º—É —Ç–∞
  —ñ–º'—è —Ñ–∞–π–ª—É, —è–∫–µ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–∑–≤–∏ —Ñ—ñ–ª—å–º—É —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É –ø–æ—Å—Ç–µ—Ä—É.

–û—Ç–∂–µ, —Ü–µ–π –∫–æ–¥ –æ–±—Ä–æ–±–ª—è—î –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –ø—Ä–æ —Ñ—ñ–ª—å–º, —Ñ–æ—Ä–º—É—î —Ç–µ–∫—Å—Ç –∑ –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ —Ñ—ñ–ª—å–º —ñ
–≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —Ñ–æ—Ç–æ –∑ –ø–æ—Å—Ç–µ—Ä–æ–º —Ñ—ñ–ª—å–º—É —Ä–∞–∑–æ–º –∑ —Ç–µ–∫—Å—Ç–æ–º.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 8. –ú–æ–¥—É–ª—å `models.py`

–°—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥—É–ª—å `models.py` –∑ –∫–ª–∞—Å–æ–º `Film()` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ, –¥–ª—è —è–∫—ñ—Å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–æ –∫–æ–∂–Ω–æ–º—É —Ñ—ñ–ª—å–º—É.

```python
from pydantic import BaseModel


class Film(BaseModel):
    name: str
    description: str
    rating: float
    genre: str
    actors: list[str]
    poster: str
```

–ö–ª–∞—Å `Film` - —Ü–µ –º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö, —è–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ñ—ñ–ª—å–º —Ç–∞ –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–ª—è:

- `name`: –ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É (`str`).
- `description`: –û–ø–∏—Å —Ñ—ñ–ª—å–º—É (`str`).
- `rating`: –†–µ–π—Ç–∏–Ω–≥ —Ñ—ñ–ª—å–º—É (`float`).
- `genre`: –ñ–∞–Ω—Ä —Ñ—ñ–ª—å–º—É (`str`).
- `actors`: –°–ø–∏—Å–æ–∫ –∞–∫—Ç–æ—Ä—ñ–≤, —è–∫—ñ –∑–Ω—ñ–º–∞–ª–∏—Å—è —É —Ñ—ñ–ª—å–º—ñ (`list[str]`).
- `poster`: URL –ø–æ—Å—Ç–µ—Ä—É —Ñ—ñ–ª—å–º—É (`str`).

–ú–æ–¥–µ–ª—å –∫–ª–∞—Å—É `Film(BaseModel)` –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ —Ñ—ñ–ª—å–º—ñ–≤ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é –¥–∞–Ω–∏—Ö, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î —É–Ω–∏–∫–Ω—É—Ç–∏
–ø–æ–º–∏–ª–æ–∫, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–∏—Ö.

> üí° –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `pydantic` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–Ω–æ—Ç–∞—Ü—ñ–π —Ç–∏–ø—ñ–≤
> Python.

> üí° –ö–ª–∞—Å `BaseModel` - —Ü–µ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ `pydantic`, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–∏—Ö, —Ç–∞
> –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö.

### –î–æ–¥–∞–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Ä—è–¥–∫–∏ —ñ–º–ø–æ—Ä—Ç—É —É —Ñ–∞–π–ª `bot.py`:

```python
from models import Film
```

–Ü–º–ø–æ—Ä—Ç `from models import Film` —ñ–º–ø–æ—Ä—Ç—É—î –∫–ª–∞—Å `Film` –∑ —Ñ–∞–π–ª—É `models.py`, —â–æ–± –π–æ–≥–æ –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤
`bot.py` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —Ñ—ñ–ª—å–º—ñ–≤.

```python
# Old string
from aiogram.types import Message, CallbackQuery

# New string
from aiogram.types import Message, CallbackQuery, URLInputFile
```

–ö–ª–∞—Å `URLInputFile` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª—ñ–≤ –∑–∞ **URL** —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –¥–æ–∫—É–º–µ–Ω—Ç–∏ —Ç–∞
—ñ–Ω—à—ñ —Ç–∏–ø–∏ —Ñ–∞–π–ª—ñ–≤, —è–∫—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞ –ø–µ–≤–Ω–∏–º **URL**.

–ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑–º—ñ–Ω–∏ –≤ **TelegramBot**.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 9. –ü—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫—ñ–≤ üöÄ

> –ù–∞ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ –≤–∏–≤—á–∏–ª–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Ç–µ–º–∏:

- –°—Ç–≤–æ—Ä–∏–ª–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤ —É **TelegramBot**.
- –î–æ–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
- –†–µ–∞–ª—ñ–∑—É–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ñ—ñ–ª—å–º–∏.

–¢–µ–ø–µ—Ä –Ω–∞—à **TelegramBot** –º–æ–∂–µ –Ω–µ —Ç—ñ–ª—å–∫–∏ –≤—ñ—Ç–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –∞–ª–µ –π –Ω–∞–¥–∞–≤–∞—Ç–∏ —ó–º –∫–æ—Ä–∏—Å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ñ—ñ–ª—å–º–∏.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---
